branches:
  only:
  - master
sudo: required
language: java
services:
- docker
env:
- PIPELINE5_VERSION=5.2.$TRAVIS_BUILD_NUMBER
script:
- 'if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then mvn clean install -B; else mvn clean install -DskipDocker -DskipShade -B; fi'
before_install:
- openssl aes-256-cbc -K $encrypted_f6c91b3577bb_key -iv $encrypted_f6c91b3577bb_iv
  -in cluster/google-key.json.enc -out cluster/google-key.json -d
- echo "$DOCKER_HUB_PASSWORD" | docker login -u "hartwigmedicalfoundation" --password-stdin
- mvn versions:set -DnewVersion=$PIPELINE5_VERSION
- sudo apt-get -qq update
- sudo apt-get install -y samtools google-cloud-sdk
- "./travis-init.sh"
- export PATH=$PATH:$PWD/bwa/
install: "/bin/true"
after_success:
- docker push hartwigmedicalfoundation/pipeline5:$PIPELINE5_VERSION
